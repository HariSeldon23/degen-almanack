<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-12-09">

<title>Trollip’s Degen Almanack - DeFi Fundamentals</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/independence/starter.html" rel="next">
<link href="../../content/independence/fundamentals.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://platform.twitter.com/widgets.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/independence/independence.html">Path to Independence</a></li><li class="breadcrumb-item"><a href="../../content/independence/basic_defi.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Trollip’s Degen Almanack</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/HariSeldon23/degen-almanack" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../copyright.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copyright Notice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dedication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dedication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../epigraph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Epigraph</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/intro/use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">How to Use This Almanack</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/intro/terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Web3 Terminology</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Digital Independence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/path.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The Path to Digital Money</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/alternatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Search for Alternatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/basic_security.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Protecting Your Assets</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Path to Independence</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/independence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Starting Your Web3 Journey</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/first_steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Your First Steps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/basic_defi.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/starter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Make some money</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/degen/mid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Mid Brain</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/degen/big.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Big brain</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Web3 Essentials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/essentials/memes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Meme Culture</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Technologist’s Path</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Overview</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/cryptography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Cryptography</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/blockchains.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Blockchains</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/gas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Gas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/dapps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">dApps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/mev.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">MEV</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/languages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Languages</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Financial</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/tokens.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Digital Assets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/market_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Market Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/ratings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Ratings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/trollip_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Trollip’s Index</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Social</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/social/governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Governance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Contributing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#getting-your-first-eth-on-base" id="toc-getting-your-first-eth-on-base" class="nav-link" data-scroll-target="#getting-your-first-eth-on-base">Getting Your First ETH on Base</a>
  <ul class="collapse">
  <li><a href="#direct-purchase-method" id="toc-direct-purchase-method" class="nav-link" data-scroll-target="#direct-purchase-method">Direct Purchase Method</a></li>
  <li><a href="#understanding-base-vs-ethereum" id="toc-understanding-base-vs-ethereum" class="nav-link" data-scroll-target="#understanding-base-vs-ethereum">Understanding Base vs Ethereum</a></li>
  </ul></li>
  <li><a href="#your-first-defi-steps-on-base" id="toc-your-first-defi-steps-on-base" class="nav-link" data-scroll-target="#your-first-defi-steps-on-base">Your First DeFi Steps on Base</a></li>
  <li><a href="#essential-dex-skills-on-base" id="toc-essential-dex-skills-on-base" class="nav-link" data-scroll-target="#essential-dex-skills-on-base">Essential DEX Skills on Base</a>
  <ul class="collapse">
  <li><a href="#your-first-swap-on-base" id="toc-your-first-swap-on-base" class="nav-link" data-scroll-target="#your-first-swap-on-base">Your First Swap on Base</a></li>
  <li><a href="#understanding-gas-on-base" id="toc-understanding-gas-on-base" class="nav-link" data-scroll-target="#understanding-gas-on-base">Understanding Gas on Base</a></li>
  </ul></li>
  <li><a href="#base-defi-lending-and-yield-strategies" id="toc-base-defi-lending-and-yield-strategies" class="nav-link" data-scroll-target="#base-defi-lending-and-yield-strategies">Base DeFi: Lending and Yield Strategies</a>
  <ul class="collapse">
  <li><a href="#understanding-lending-markets-on-base" id="toc-understanding-lending-markets-on-base" class="nav-link" data-scroll-target="#understanding-lending-markets-on-base">Understanding Lending Markets on Base</a></li>
  <li><a href="#moonwell-bases-native-lending-protocol" id="toc-moonwell-bases-native-lending-protocol" class="nav-link" data-scroll-target="#moonwell-bases-native-lending-protocol">Moonwell: Base’s Native Lending Protocol</a></li>
  <li><a href="#compound-on-base" id="toc-compound-on-base" class="nav-link" data-scroll-target="#compound-on-base">Compound on Base</a></li>
  </ul></li>
  <li><a href="#yield-strategies-tailored-for-base" id="toc-yield-strategies-tailored-for-base" class="nav-link" data-scroll-target="#yield-strategies-tailored-for-base">Yield Strategies Tailored for Base</a>
  <ul class="collapse">
  <li><a href="#strategy-1-stablecoin-lending" id="toc-strategy-1-stablecoin-lending" class="nav-link" data-scroll-target="#strategy-1-stablecoin-lending">Strategy 1: Stablecoin Lending</a></li>
  <li><a href="#strategy-2-eth-based-yields" id="toc-strategy-2-eth-based-yields" class="nav-link" data-scroll-target="#strategy-2-eth-based-yields">Strategy 2: ETH-Based Yields</a></li>
  <li><a href="#strategy-3-liquidity-provision-on-base" id="toc-strategy-3-liquidity-provision-on-base" class="nav-link" data-scroll-target="#strategy-3-liquidity-provision-on-base">Strategy 3: Liquidity Provision on Base</a></li>
  <li><a href="#strategy-4-yield-aggregation-on-base" id="toc-strategy-4-yield-aggregation-on-base" class="nav-link" data-scroll-target="#strategy-4-yield-aggregation-on-base">Strategy 4: Yield Aggregation on Base</a></li>
  </ul></li>
  <li><a href="#building-a-balanced-base-portfolio" id="toc-building-a-balanced-base-portfolio" class="nav-link" data-scroll-target="#building-a-balanced-base-portfolio">Building a Balanced Base Portfolio</a></li>
  <li><a href="#tax-and-record-keeping" id="toc-tax-and-record-keeping" class="nav-link" data-scroll-target="#tax-and-record-keeping">Tax and Record Keeping</a></li>
  <li><a href="#emergency-procedures" id="toc-emergency-procedures" class="nav-link" data-scroll-target="#emergency-procedures">Emergency Procedures</a></li>
  <li><a href="#bridge-safety-and-ethereum-relationship" id="toc-bridge-safety-and-ethereum-relationship" class="nav-link" data-scroll-target="#bridge-safety-and-ethereum-relationship">Bridge Safety and Ethereum Relationship</a></li>
  <li><a href="#moving-beyond-base" id="toc-moving-beyond-base" class="nav-link" data-scroll-target="#moving-beyond-base">Moving Beyond Base</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/independence/independence.html">Path to Independence</a></li><li class="breadcrumb-item"><a href="../../content/independence/basic_defi.html"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">DeFi Fundamentals</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>While Ethereum created DeFi and remains its foundational layer, starting your DeFi journey directly on Ethereum can be expensive due to high transaction fees (sometimes $50+ per transaction). Fortunately, Base, a layer 2 network built on top of Ethereum, offers the same fundamental DeFi capabilities but with dramatically lower fees (often less than $1 per transaction). This makes it an ideal starting point for learning DeFi.</p>
</section>
<section id="getting-your-first-eth-on-base" class="level2">
<h2 class="anchored" data-anchor-id="getting-your-first-eth-on-base">Getting Your First ETH on Base</h2>
<p>Now that you have Bitcoin in your Phantom wallet, let’s get some ETH on Base to start exploring DeFi. We’ll use Coinbase for this process since they built Base and offer direct deposits.</p>
<section id="direct-purchase-method" class="level3">
<h3 class="anchored" data-anchor-id="direct-purchase-method">Direct Purchase Method</h3>
<p>The most straightforward approach is:</p>
<ol type="1">
<li>On Coinbase Exchange:
<ul>
<li>Purchase $50-100 worth of ETH</li>
<li>Select “Withdraw”</li>
<li>Choose “Send to Base”</li>
<li>Send to your Phantom wallet’s Base address</li>
</ul></li>
</ol>
<p>This method is optimal because:</p>
<ul>
<li>Coinbase handles the bridge transaction for you</li>
<li>You avoid paying Ethereum mainnet gas fees</li>
<li>The process is simpler than manual bridging</li>
<li>Base transaction fees are much lower</li>
</ul>
</section>
<section id="understanding-base-vs-ethereum" class="level3">
<h3 class="anchored" data-anchor-id="understanding-base-vs-ethereum">Understanding Base vs Ethereum</h3>
<p>Base maintains a special relationship with Ethereum:</p>
<ul>
<li>It inherits Ethereum’s security</li>
<li>Uses the same wallet addresses</li>
<li>Runs the same smart contracts</li>
<li>Costs much less to use</li>
</ul>
<p>Think of Base like a express lane on a highway - it’s faster and cheaper while still getting you to the same destination safely.</p>
</section>
</section>
<section id="your-first-defi-steps-on-base" class="level2">
<h2 class="anchored" data-anchor-id="your-first-defi-steps-on-base">Your First DeFi Steps on Base</h2>
<p>Let’s verify everything is working before diving deeper:</p>
<ol type="1">
<li>Check Your Setup
<ul>
<li>Confirm ETH appears in your Phantom wallet on Base</li>
<li>Make sure you’ve selected Base network</li>
<li>Have your Phantom wallet connected to Base</li>
<li>Keep transaction records for taxes</li>
</ul></li>
<li>Test Transaction
<ul>
<li>Send a tiny amount of ETH (like $1 worth) between your own addresses</li>
<li>Notice how the gas fees are much lower than Ethereum</li>
<li>Get comfortable with Base network mechanics</li>
<li>Understand transaction confirmation times</li>
</ul></li>
</ol>
</section>
<section id="essential-dex-skills-on-base" class="level2">
<h2 class="anchored" data-anchor-id="essential-dex-skills-on-base">Essential DEX Skills on Base</h2>
<p>Base hosts many of the same DeFi protocols as Ethereum. Let’s start with decentralized exchanges, using Base’s version of Uniswap.</p>
<section id="your-first-swap-on-base" class="level3">
<h3 class="anchored" data-anchor-id="your-first-swap-on-base">Your First Swap on Base</h3>
<p>Let’s walk through a simple ETH to USDC swap:</p>
<ol type="1">
<li>Preparation
<ul>
<li>Connect your Phantom wallet to Base’s Uniswap interface</li>
<li>Ensure you have enough ETH for both the swap and gas (much less than Ethereum!)</li>
<li>Verify you’re on the official Uniswap site</li>
<li>Check current Base gas prices (typically cents, not dollars)</li>
</ul></li>
<li>Making the Swap
<ul>
<li>Select ETH as your “from” token</li>
<li>Choose USDC as your “to” token</li>
<li>Enter a small test amount ($10 worth)</li>
<li>Review the quoted price and gas fees</li>
<li>Notice how Base’s low gas makes small trades viable</li>
</ul></li>
</ol>
</section>
<section id="understanding-gas-on-base" class="level3">
<h3 class="anchored" data-anchor-id="understanding-gas-on-base">Understanding Gas on Base</h3>
<p>While Base uses the same gas system as Ethereum, the costs are much lower:</p>
<ol type="1">
<li>Typical Base Costs:
<ul>
<li>Simple transfers: $0.01-0.05</li>
<li>Token swaps: $0.10-0.30</li>
<li>Complex DeFi operations: $0.20-0.50 Compare this to Ethereum’s fees which can be 50-100x higher!</li>
</ul></li>
<li>Gas Reserve Planning
<ul>
<li>Keep $5-10 worth of ETH for gas on Base</li>
<li>Monitor Base network conditions</li>
<li>Understand peak usage times</li>
<li>Plan non-urgent transactions</li>
</ul></li>
</ol>
</section>
</section>
<section id="base-defi-lending-and-yield-strategies" class="level2">
<h2 class="anchored" data-anchor-id="base-defi-lending-and-yield-strategies">Base DeFi: Lending and Yield Strategies</h2>
<section id="understanding-lending-markets-on-base" class="level3">
<h3 class="anchored" data-anchor-id="understanding-lending-markets-on-base">Understanding Lending Markets on Base</h3>
<p>Base has attracted several major lending protocols, each offering unique features and risk profiles. Let’s explore how to use them safely and effectively.</p>
</section>
<section id="moonwell-bases-native-lending-protocol" class="level3">
<h3 class="anchored" data-anchor-id="moonwell-bases-native-lending-protocol">Moonwell: Base’s Native Lending Protocol</h3>
<p>Moonwell represents one of Base’s core lending protocols. Think of it like a decentralized bank where you can both lend and borrow crypto assets. Here’s how to use it effectively:</p>
<ol type="1">
<li>Lending Assets When you lend on Moonwell, you receive mToken (like mUSDC or mETH) representing your deposit. For example:</li>
</ol>
<ul>
<li>Deposit 100 USDC, receive 100 mUSDC</li>
<li>Your mUSDC continuously accrues interest</li>
<li>Interest rates typically range from 2-5% APY for stablecoins</li>
<li>ETH lending rates usually range from 1-3% APY</li>
</ul>
<ol start="2" type="1">
<li>Borrowing Basics Moonwell uses an overcollateralized lending model:</li>
</ol>
<ul>
<li>You must maintain at least 125% collateral ratio</li>
<li>Different assets have different collateral factors</li>
<li>ETH typically has 80% collateral factor</li>
<li>Stablecoins often have 90% collateral factor</li>
</ul>
<ol start="3" type="1">
<li>Risk Management on Moonwell</li>
</ol>
<ul>
<li>Monitor your health factor constantly</li>
<li>Set up alerts for approaching liquidation</li>
<li>Maintain at least 150% collateral ratio for safety</li>
<li>Understand emergency exit procedures</li>
</ul>
</section>
<section id="compound-on-base" class="level3">
<h3 class="anchored" data-anchor-id="compound-on-base">Compound on Base</h3>
<p>Compound has deployed their latest version on Base, offering some unique features:</p>
<ol type="1">
<li>Key Differences from Moonwell</li>
</ol>
<ul>
<li>Different interest rate curves</li>
<li>Usually lower collateral requirements</li>
<li>More conservative risk parameters</li>
<li>Established security track record</li>
</ul>
<ol start="2" type="1">
<li>Strategic Usage</li>
</ol>
<ul>
<li>Compare rates between protocols</li>
<li>Consider gas costs when switching</li>
<li>Understand unique features of each</li>
<li>Maintain positions across both for diversification</li>
</ul>
</section>
</section>
<section id="yield-strategies-tailored-for-base" class="level2">
<h2 class="anchored" data-anchor-id="yield-strategies-tailored-for-base">Yield Strategies Tailored for Base</h2>
<p>Base offers several unique opportunities for generating yield. Let’s explore them from lowest to highest risk.</p>
<section id="strategy-1-stablecoin-lending" class="level3">
<h3 class="anchored" data-anchor-id="strategy-1-stablecoin-lending">Strategy 1: Stablecoin Lending</h3>
<p>The foundation of any yield strategy should start with stable, reliable returns:</p>
<ol type="1">
<li>USDC Lending Path</li>
</ol>
<ul>
<li>Lend USDC on Moonwell or Compound</li>
<li>Current base yields: 2-4% APY</li>
<li>Additional protocol rewards possible</li>
<li>Minimal impermanent loss risk</li>
</ul>
<ol start="2" type="1">
<li>Risk Mitigation</li>
</ol>
<ul>
<li>Split funds between protocols</li>
<li>Monitor protocol health</li>
<li>Keep detailed records</li>
<li>Understand withdrawal processes</li>
</ul>
</section>
<section id="strategy-2-eth-based-yields" class="level3">
<h3 class="anchored" data-anchor-id="strategy-2-eth-based-yields">Strategy 2: ETH-Based Yields</h3>
<p>Base offers several ways to earn yield on ETH holdings:</p>
<ol type="1">
<li>Liquid Staking</li>
</ol>
<ul>
<li>Deposit ETH via cbETH</li>
<li>Earn staking rewards</li>
<li>Maintain liquidity</li>
<li>Current yields: 3-4% APY</li>
</ul>
<ol start="2" type="1">
<li>Lending Markets</li>
</ol>
<ul>
<li>Provide ETH as collateral</li>
<li>Borrow stablecoins at low ratios</li>
<li>Earn lending yields</li>
<li>Manage liquidation risks</li>
</ul>
</section>
<section id="strategy-3-liquidity-provision-on-base" class="level3">
<h3 class="anchored" data-anchor-id="strategy-3-liquidity-provision-on-base">Strategy 3: Liquidity Provision on Base</h3>
<p>Base hosts several DEXs where you can provide liquidity:</p>
<ol type="1">
<li>Stable Pair Liquidity (Lowest Risk)</li>
</ol>
<ul>
<li>USDC-USDbC pools</li>
<li>Typical yields: 3-8% APY</li>
<li>Minimal impermanent loss</li>
<li>Regular fee income</li>
</ul>
<ol start="2" type="1">
<li>ETH Pair Liquidity (Medium Risk)</li>
</ol>
<ul>
<li>ETH-USDC pools</li>
<li>Yields vary widely: 5-20% APY</li>
<li>Higher impermanent loss risk</li>
<li>Better for long-term holders</li>
</ul>
</section>
<section id="strategy-4-yield-aggregation-on-base" class="level3">
<h3 class="anchored" data-anchor-id="strategy-4-yield-aggregation-on-base">Strategy 4: Yield Aggregation on Base</h3>
<p>Several yield aggregators have launched on Base:</p>
<ol type="1">
<li>Yearn-style Vaults</li>
</ol>
<ul>
<li>Automated yield farming</li>
<li>Protocol reward optimization</li>
<li>Complex strategies simplified</li>
<li>Higher gas efficiency</li>
</ul>
<ol start="2" type="1">
<li>Risk Considerations</li>
</ol>
<ul>
<li>Smart contract risk exposure</li>
<li>Strategy complexity risk</li>
<li>Reward token price risk</li>
<li>Exit liquidity risk</li>
</ul>
</section>
</section>
<section id="building-a-balanced-base-portfolio" class="level2">
<h2 class="anchored" data-anchor-id="building-a-balanced-base-portfolio">Building a Balanced Base Portfolio</h2>
<p>Let’s create a sample portfolio strategy for $1000 on Base:</p>
<ol type="1">
<li>Conservative Allocation (40%)</li>
</ol>
<ul>
<li>$300 USDC split between lending protocols</li>
<li>$100 in stable-stable LP positions</li>
<li>Expected yield: 3-5% APY</li>
<li>Focus on capital preservation</li>
</ul>
<ol start="2" type="1">
<li>Moderate Risk (40%)</li>
</ol>
<ul>
<li>$200 ETH in lending markets</li>
<li>$200 in ETH-USDC liquidity pools</li>
<li>Expected yield: 5-10% APY</li>
<li>Balance growth with stability</li>
</ul>
<ol start="3" type="1">
<li>Higher Risk (20%)</li>
</ol>
<ul>
<li>$200 in yield aggregators</li>
<li>Focus on newer protocols with incentives</li>
<li>Expected yield: 10-20% APY</li>
<li>Higher risk for higher returns</li>
</ul>
</section>
<section id="tax-and-record-keeping" class="level2">
<h2 class="anchored" data-anchor-id="tax-and-record-keeping">Tax and Record Keeping</h2>
<p>Base transactions require careful tracking:</p>
<ol type="1">
<li>Essential Records</li>
</ol>
<ul>
<li>All deposits and withdrawals</li>
<li>Interest earned</li>
<li>Trading fees collected</li>
<li>Protocol rewards received</li>
</ul>
<ol start="2" type="1">
<li>Transaction Management</li>
</ol>
<ul>
<li>Use portfolio tracking tools</li>
<li>Keep detailed spreadsheets</li>
<li>Document all wallet addresses</li>
<li>Save all transaction hashes</li>
</ul>
</section>
<section id="emergency-procedures" class="level2">
<h2 class="anchored" data-anchor-id="emergency-procedures">Emergency Procedures</h2>
<p>Always maintain emergency plans:</p>
<ol type="1">
<li>Quick Exit Strategy</li>
</ol>
<ul>
<li>Keep enough ETH for exit transactions</li>
<li>Know fastest withdrawal paths</li>
<li>Maintain exchange accounts for off-ramps</li>
<li>Understand bridge withdrawal times</li>
</ul>
<ol start="2" type="1">
<li>Risk Monitoring</li>
</ol>
<ul>
<li>Track protocol TVL</li>
<li>Monitor social channels</li>
<li>Set up alerts</li>
<li>Keep emergency contacts</li>
</ul>
<p>Remember: Base’s lower transaction costs make it easier to actively manage positions and adjust strategies, but never sacrifice security for yield. Start small, learn the mechanics, and scale up gradually as you gain confidence in the protocols and your own abilities.</p>
</section>
<section id="bridge-safety-and-ethereum-relationship" class="level2">
<h2 class="anchored" data-anchor-id="bridge-safety-and-ethereum-relationship">Bridge Safety and Ethereum Relationship</h2>
<p>While we’re starting on Base for cost efficiency, it’s important to understand the relationship with Ethereum:</p>
<ol type="1">
<li>Security Model
<ul>
<li>Base derives security from Ethereum</li>
<li>Transactions eventually settle on Ethereum</li>
<li>Assets can always be bridged back to Ethereum</li>
<li>Seven-day withdrawal period for security</li>
</ul></li>
<li>Bridge Considerations
<ul>
<li>Official Coinbase bridge is safest</li>
<li>Understand withdrawal timeframes</li>
<li>Keep records of bridge transactions</li>
<li>Monitor bridge status</li>
</ul></li>
</ol>
</section>
<section id="moving-beyond-base" class="level2">
<h2 class="anchored" data-anchor-id="moving-beyond-base">Moving Beyond Base</h2>
<p>As your DeFi experience grows and your transaction sizes increase, the higher security of Ethereum mainnet may justify its higher fees. Consider graduating to Ethereum when:</p>
<ol type="1">
<li>Your portfolio grows significantly</li>
<li>You need specific Ethereum-only protocols</li>
<li>You’re doing large trades where fees matter less</li>
<li>You want maximum security for long-term holdings</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/independence/fundamentals.html" class="pagination-link  aria-label=" &lt;span="" fundamentals&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/independence/starter.html" class="pagination-link" aria-label="<span class='chapter-number'>13</span>&nbsp; <span class='chapter-title'>Make some money</span>">
        <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Make some money</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>