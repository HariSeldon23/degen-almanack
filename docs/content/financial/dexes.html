<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.2">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-12-09">

<title>Decentralized Exchanges – Trollip’s Degen Almanack</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/financial/ratings.html" rel="next">
<link href="../../content/financial/market_structure.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-823ada2c64a85bd70d66c02353c14ab3.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d0d28e68b2311299fec6095e89651c71.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://platform.twitter.com/widgets.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/financial/tokens.html">Financial</a></li><li class="breadcrumb-item"><a href="../../content/financial/dexes.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Decentralized Exchanges</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Trollip’s Degen Almanack</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/HariSeldon23/degen-almanack" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../copyright.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Copyright Notice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dedication.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Dedication</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../epigraph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Epigraph</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/intro/use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">How to Use This Almanack</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/intro/terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Web3 Terminology</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Digital Independence</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/path.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The Path to Digital Money</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/alternatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">The Search for Alternatives</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Tools</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/foundations/basic_security.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Protecting Your Assets</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Path to Independence</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/independence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Starting Your Web3 Journey</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/first_steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Your First Steps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/fundamentals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">DeFi Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/invest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">What Should I Invest In?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/stables.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">The Evolution of Stablecoins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/independence/mid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Moving Beyond Basic DeFi</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Web3 Essentials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/essentials/memes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Meme Culture</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Technologist’s Path</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">The Technologist’s Path</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/terms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Technical Terms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/cryptography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Cryptography</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/blockchains.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Blockchain Technology</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/modular.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Modular Blockchain Architecture</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/languages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Smart Contract Languages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/gas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Gas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/dapps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Decentralized Applications (dApps)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/ethereum.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Ethereum</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/slashing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">slashing.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/networking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Networking Protocols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/technical/mev.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Maximal Extractable Value (MEV)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Financial</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/tokens.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Digital Assets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/market_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Market Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/dexes.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Decentralized Exchanges</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/ratings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Digital Asset Rating Framework</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/financial/trollip_index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Trollip’s Index</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Social</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/social/governance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Web3 Governance</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../contributing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Contributing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#the-foundation-year" id="toc-the-foundation-year" class="nav-link" data-scroll-target="#the-foundation-year">2016: The Foundation Year</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations" id="toc-protocol-innovations" class="nav-link" data-scroll-target="#protocol-innovations">Protocol Innovations</a></li>
  <li><a href="#dex-tokens" id="toc-dex-tokens" class="nav-link" data-scroll-target="#dex-tokens">DEX Tokens</a></li>
  </ul></li>
  <li><a href="#the-year-of-market-making-innovation" id="toc-the-year-of-market-making-innovation" class="nav-link" data-scroll-target="#the-year-of-market-making-innovation">2017: The Year of Market Making Innovation</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-1" id="toc-protocol-innovations-1" class="nav-link" data-scroll-target="#protocol-innovations-1">Protocol Innovations</a></li>
  <li><a href="#dex-tokens-1" id="toc-dex-tokens-1" class="nav-link" data-scroll-target="#dex-tokens-1">DEX Tokens</a></li>
  <li><a href="#trading-intents" id="toc-trading-intents" class="nav-link" data-scroll-target="#trading-intents">Trading Intents</a></li>
  <li><a href="#notable-hacks-and-security-incidents" id="toc-notable-hacks-and-security-incidents" class="nav-link" data-scroll-target="#notable-hacks-and-security-incidents">Notable Hacks and Security Incidents</a></li>
  </ul></li>
  <li><a href="#the-year-of-market-making-evolution" id="toc-the-year-of-market-making-evolution" class="nav-link" data-scroll-target="#the-year-of-market-making-evolution">2018: The Year of Market Making Evolution</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-2" id="toc-protocol-innovations-2" class="nav-link" data-scroll-target="#protocol-innovations-2">Protocol Innovations</a></li>
  <li><a href="#trading-intents-evolution" id="toc-trading-intents-evolution" class="nav-link" data-scroll-target="#trading-intents-evolution">Trading Intents Evolution</a></li>
  <li><a href="#academic-foundations" id="toc-academic-foundations" class="nav-link" data-scroll-target="#academic-foundations">Academic Foundations</a></li>
  <li><a href="#early-mev-awareness" id="toc-early-mev-awareness" class="nav-link" data-scroll-target="#early-mev-awareness">Early MEV Awareness</a></li>
  <li><a href="#hacks" id="toc-hacks" class="nav-link" data-scroll-target="#hacks">Hacks</a></li>
  </ul></li>
  <li><a href="#the-year-of-infrastructure-development" id="toc-the-year-of-infrastructure-development" class="nav-link" data-scroll-target="#the-year-of-infrastructure-development">2019: The Year of Infrastructure Development</a>
  <ul class="collapse">
  <li><a href="#protocol-innovation" id="toc-protocol-innovation" class="nav-link" data-scroll-target="#protocol-innovation">Protocol Innovation</a></li>
  <li><a href="#trading-intents-evolution-1" id="toc-trading-intents-evolution-1" class="nav-link" data-scroll-target="#trading-intents-evolution-1">Trading Intents Evolution</a></li>
  <li><a href="#mev-evolution" id="toc-mev-evolution" class="nav-link" data-scroll-target="#mev-evolution">MEV Evolution</a></li>
  <li><a href="#token-evolution" id="toc-token-evolution" class="nav-link" data-scroll-target="#token-evolution">Token Evolution</a></li>
  <li><a href="#notable-hacks-and-security-incidents-1" id="toc-notable-hacks-and-security-incidents-1" class="nav-link" data-scroll-target="#notable-hacks-and-security-incidents-1">Notable Hacks and Security Incidents</a></li>
  </ul></li>
  <li><a href="#the-year-of-specialized-solutions" id="toc-the-year-of-specialized-solutions" class="nav-link" data-scroll-target="#the-year-of-specialized-solutions">2020: The Year of Specialized Solutions</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-3" id="toc-protocol-innovations-3" class="nav-link" data-scroll-target="#protocol-innovations-3">Protocol Innovations</a></li>
  <li><a href="#dex-tokens-2" id="toc-dex-tokens-2" class="nav-link" data-scroll-target="#dex-tokens-2">DEX Tokens</a></li>
  <li><a href="#trading-intents-1" id="toc-trading-intents-1" class="nav-link" data-scroll-target="#trading-intents-1">Trading Intents</a></li>
  <li><a href="#mev-evolution-1" id="toc-mev-evolution-1" class="nav-link" data-scroll-target="#mev-evolution-1">MEV Evolution</a></li>
  </ul></li>
  <li><a href="#the-capital-efficiency-revolution" id="toc-the-capital-efficiency-revolution" class="nav-link" data-scroll-target="#the-capital-efficiency-revolution">2021: The Capital Efficiency Revolution</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-4" id="toc-protocol-innovations-4" class="nav-link" data-scroll-target="#protocol-innovations-4">Protocol Innovations</a></li>
  <li><a href="#mev-evolution-2" id="toc-mev-evolution-2" class="nav-link" data-scroll-target="#mev-evolution-2">MEV Evolution</a></li>
  </ul></li>
  <li><a href="#the-year-of-accessibility-and-cross-chain-innovation" id="toc-the-year-of-accessibility-and-cross-chain-innovation" class="nav-link" data-scroll-target="#the-year-of-accessibility-and-cross-chain-innovation">2022: The Year of Accessibility and Cross-Chain Innovation</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-5" id="toc-protocol-innovations-5" class="nav-link" data-scroll-target="#protocol-innovations-5">Protocol Innovations</a></li>
  <li><a href="#trading-intents-2" id="toc-trading-intents-2" class="nav-link" data-scroll-target="#trading-intents-2">Trading Intents</a></li>
  <li><a href="#mev-evolution-3" id="toc-mev-evolution-3" class="nav-link" data-scroll-target="#mev-evolution-3">MEV Evolution</a></li>
  </ul></li>
  <li><a href="#the-year-of-optimization" id="toc-the-year-of-optimization" class="nav-link" data-scroll-target="#the-year-of-optimization">2023: The Year of Optimization</a>
  <ul class="collapse">
  <li><a href="#protocol-innovations-6" id="toc-protocol-innovations-6" class="nav-link" data-scroll-target="#protocol-innovations-6">Protocol Innovations</a></li>
  <li><a href="#cross-chain-integration" id="toc-cross-chain-integration" class="nav-link" data-scroll-target="#cross-chain-integration">Cross-Chain Integration</a></li>
  <li><a href="#mev-evolution-4" id="toc-mev-evolution-4" class="nav-link" data-scroll-target="#mev-evolution-4">MEV Evolution</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/financial/tokens.html">Financial</a></li><li class="breadcrumb-item"><a href="../../content/financial/dexes.html"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Decentralized Exchanges</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Decentralized Exchanges</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><strong>A Chronological Analysis</strong></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>The development of decentralized exchanges (DEXs) represents one of cryptocurrency’s most fascinating evolutionary paths. This document traces that evolution year by year, examining four key aspects: protocol innovations, the evolution of trading intents, DEX token development, and the emergence of Miner Extractable Value (MEV). Each year brought significant advances that built upon previous concepts while solving new challenges.</p>
</section>
<section id="the-foundation-year" class="level2">
<h2 class="anchored" data-anchor-id="the-foundation-year">2016: The Foundation Year</h2>
<section id="protocol-innovations" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations">Protocol Innovations</h3>
<p>EtherDelta emerged as the first widely-used decentralized exchange, introducing on-chain order books. This pioneering approach maintained order lists directly on the Ethereum blockchain, with each order specifying trading amounts and prices. While revolutionary, the system faced significant limitations due to its requirement for on-chain transactions for every order and cancellation, leading to prohibitive gas costs and limited liquidity.</p>
</section>
<section id="dex-tokens" class="level3">
<h3 class="anchored" data-anchor-id="dex-tokens">DEX Tokens</h3>
<p>EtherDelta operated without a native token, relying instead on direct smart contract interactions and trading fees. This tokenless approach was common in early DeFi projects, as the concept of protocol tokens for governance and incentivization hadn’t yet emerged.</p>
</section>
</section>
<section id="the-year-of-market-making-innovation" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-market-making-innovation">2017: The Year of Market Making Innovation</h2>
<section id="protocol-innovations-1" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-1">Protocol Innovations</h3>
<p>Two major protocols emerged this year, each taking different approaches to decentralized trading:</p>
<section id="automated-market-makers-amms-a-new-paradigm" class="level4">
<h4 class="anchored" data-anchor-id="automated-market-makers-amms-a-new-paradigm">Automated Market Makers (AMMs): A New Paradigm</h4>
<p>Before diving into specific protocols, it’s important to understand the revolutionary concept of Automated Market Makers. Traditional exchanges use order books, where buyers and sellers manually place orders at specific prices. AMMs fundamentally reimagined this process by using mathematical formulas and liquidity pools to enable completely automated trading.</p>
<p>In an AMM system, instead of matching buyers with sellers, users trade against a pool of tokens. These pools are funded by liquidity providers who deposit pairs of tokens (like ETH and USDC) into a smart contract. The AMM then uses a mathematical formula to determine the exchange rate between these tokens at any given moment.</p>
<p>The key innovation of AMMs is that they eliminate the need for order books and traditional market makers. When a user wants to trade, they don’t need to wait for a matching order – they can immediately trade against the pool at a price determined by the mathematical formula. As tokens are bought from the pool, their price increases according to the formula, and as they’re sold into the pool, their price decreases.</p>
<p>This system offers several advantages:</p>
<ul>
<li><strong>Continuous Liquidity</strong>: Trading is always possible as long as there are tokens in the pool</li>
<li><strong>Predictable Pricing</strong>: Prices follow a predetermined curve based on the pool’s formula</li>
<li><strong>Permissionless</strong>: Anyone can provide liquidity or trade without permission</li>
<li><strong>Simplicity</strong>: No need to specify prices or manage orders</li>
</ul>
<p>Different AMM protocols use different mathematical formulas to determine prices, each optimized for specific use cases. These formulas, often called “invariants,” maintain certain mathematical relationships between the tokens in the pool.</p>
</section>
<section id="bancor-june-2017" class="level4">
<h4 class="anchored" data-anchor-id="bancor-june-2017">Bancor (June 2017)</h4>
<ul>
<li>Introduced the first automated market maker (AMM) model</li>
<li>Implemented a “constant reserve ratio” mechanism</li>
<li>Created continuous liquidity for any token pair</li>
<li>Established automatic price adjustment based on supply and demand</li>
<li>Introduced protocol-owned liquidity</li>
</ul>
<video width="100%" height="auto" controls="">
<source src="../../animations/media/videos/bancor/480p15/BancorCRRExplainer.mp4" type="video/mp4">
<p>Your browser does not support the video tag. </p>
</video></section>
<section id="x-protocol-august-2017" class="level4">
<h4 class="anchored" data-anchor-id="x-protocol-august-2017">0x Protocol (August 2017)</h4>
<ul>
<li>Built upon and improved the order book model
<ul>
<li>Introduced off-chain order relay with on-chain settlement</li>
<li>Developed sophisticated filler mechanisms for order execution</li>
<li>Enabled cross-platform arbitrage and liquidity provision</li>
</ul></li>
</ul>
<video width="100%" height="auto" controls="">
<source src="../../animations/media/videos/filler/480p15/Fillers.mp4" type="video/mp4">
<p>Your browser does not support the video tag. </p>
</video></section>
</section>
<section id="dex-tokens-1" class="level3">
<h3 class="anchored" data-anchor-id="dex-tokens-1">DEX Tokens</h3>
<p>The year 2017 marked a crucial turning point in DEX tokenomics with the introduction of two influential token models:</p>
<p>Bancor Network Token (BNT) served as the world’s first smart token, introducing several important concepts:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/charts/BNT.png" class="img-fluid figure-img"></p>
<figcaption>BNT Token Price</figcaption>
</figure>
</div>
<ul>
<li>Network Hub: BNT functioned as an intermediary currency for all trades within the Bancor network. When users wanted to exchange one token for another, the trade would automatically route through BNT, creating a unified liquidity network.</li>
<li>Automated Price Discovery: The token worked with Bancor’s smart contracts to maintain continuous liquidity and automated price discovery through the constant reserve ratio mechanism.</li>
<li>Protocol-Owned Liquidity: BNT introduced the concept of protocol-owned liquidity, where the token itself served as a reserve currency backing all trading pairs.</li>
<li>Price Stability Mechanism: The smart contract automatically adjusted BNT supply based on market demand, attempting to maintain price stability through algorithmic market making.</li>
<li>Liquidity incentivization: BNT was used for liquidity mining rewards, where liquidity providers would earn BNT tokens for contributing to pools.</li>
</ul>
<p>The 0x Protocol Token (ZRX) introduced a different approach focused on governance and coordination:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/charts/0x.png" class="img-fluid figure-img"></p>
<figcaption>0x Token Price</figcaption>
</figure>
</div>
<ul>
<li>Governance Rights: ZRX holders could vote on protocol upgrades, parameter adjustments, and other important protocol decisions, establishing one of the first examples of on-chain governance in DeFi.</li>
<li>Relayer Fee Payment: The token served as the primary medium for paying trading fees to relayers who facilitated order matching and execution in the 0x ecosystem.</li>
<li>Staking Incentives: Market makers and relayers could stake ZRX tokens to earn additional protocol fees, creating an economic alignment between network participants.</li>
<li>Cross-Platform Standardization: ZRX helped standardize trading fees and incentives across different platforms building on the 0x protocol, creating a unified economic model for the ecosystem.</li>
</ul>
<p>These two token models influenced many subsequent DEX tokens, with projects often adopting and modifying elements from both approaches. The BNT model influenced later automated market maker protocols, while ZRX’s governance and fee-sharing approach became a standard feature in many DeFi protocols.</p>
</section>
<section id="trading-intents" class="level3">
<h3 class="anchored" data-anchor-id="trading-intents">Trading Intents</h3>
<p>The early form of trading intents emerged through 0x v1’s order format, which represented one of the first attempts to standardize how trading desires could be expressed on-chain. Each order was composed as a structured message containing specific fields that defined the exact parameters of the trade:</p>
<pre class="solidity"><code>struct Order {
    address maker;           // Address creating the order
    address taker;           // Address allowed to fill the order (or 0 for anyone)
    address makerToken;      // Token being offered by the maker
    address takerToken;      // Token being requested by the maker
    uint256 makerTokenAmount;// Amount of maker token being offered
    uint256 takerTokenAmount;// Amount of taker token being requested
    uint256 expirationUnixTimestampSec;  // When the order expires
    uint256 salt;           // Unique number to prevent duplicate orders
}</code></pre>
<p>These early orders were signed messages that included several important characteristics:</p>
<p>Order Creation and Signing:</p>
<ul>
<li>Makers would construct an order with the above parameters</li>
<li>The order would be signed using the maker’s private key</li>
<li>The signed order could be shared off-chain through relayers</li>
<li>The signature proved the maker’s intent to trade under these exact conditions</li>
</ul>
<p>Order Matching Requirements:</p>
<ul>
<li>Orders could only be executed exactly as specified</li>
<li>No partial fills were initially supported</li>
<li>Price slippage protection was manual through exact amounts</li>
<li>Orders were strictly bilateral, requiring exact token pair matches</li>
</ul>
<p>Limitations of this Early Model:</p>
<ul>
<li>No flexibility in execution path or price</li>
<li>Could not adapt to changing market conditions</li>
<li>Required exact matching of maker and taker amounts</li>
<li>No support for complex trading strategies or routing</li>
</ul>
<p>This rigid structure was a direct reflection of how traditional centralized exchanges operated, essentially trying to recreate their order book model in a decentralized way. While limited by today’s standards, this format established several important concepts that would influence future intent specifications:</p>
<ol type="1">
<li>Cryptographic Proof of Intent</li>
</ol>
<ul>
<li>Orders were signed messages that proved the maker’s desire to trade</li>
<li>Signatures could be verified on-chain during settlement</li>
<li>This created a trustless way to express trading desires</li>
</ul>
<ol start="2" type="1">
<li>Off-chain Relay with On-chain Settlement</li>
</ol>
<ul>
<li>Orders could be shared and matched off-chain</li>
<li>Only successful matches needed on-chain transactions</li>
<li>This pattern would influence future intent distribution systems</li>
</ul>
<ol start="3" type="1">
<li>Time-Bound Validity</li>
</ol>
<ul>
<li>Orders included expiration timestamps</li>
<li>This protected makers from stale orders</li>
<li>Introduced the concept of time-limited intents</li>
</ul>
<ol start="4" type="1">
<li>Permissioned Execution</li>
</ol>
<ul>
<li>Orders could specify allowed takers</li>
<li>This enabled private order flow</li>
<li>Laid groundwork for more sophisticated access controls</li>
</ul>
<p>The limitations of this early intent format would drive innovation in subsequent years, leading to more flexible and sophisticated ways of expressing trading desires. The industry would gradually move away from exact orders toward more abstract expressions of trading intent that could adapt to market conditions and find optimal execution paths.</p>
</section>
<section id="notable-hacks-and-security-incidents" class="level3">
<h3 class="anchored" data-anchor-id="notable-hacks-and-security-incidents">Notable Hacks and Security Incidents</h3>
<p>The growing popularity of decentralized exchanges in 2017 attracted increasing attention from attackers, culminating in several significant security incidents. The most notable attack occurred in December 2017 when hackers compromised EtherDelta’s DNS server. Rather than attempting to breach the smart contracts directly, the attackers created a sophisticated phishing scheme by replacing the legitimate EtherDelta interface with a malicious clone. When users visited what appeared to be the correct website, they were actually interacting with a fake interface designed to harvest their private keys.</p>
<p>The EtherDelta incident proved particularly instructive for the DEX ecosystem. While the underlying smart contracts remained secure throughout the attack, the incident revealed how centralized components like DNS servers and web interfaces could become critical vulnerabilities in otherwise decentralized systems. The attack resulted in significant user losses and demonstrated that security considerations needed to extend beyond smart contract code to encompass the entire user interaction layer.</p>
<p>This incident influenced subsequent DEX development in several ways. First, it highlighted the importance of secure frontend deployment practices. Second, it encouraged the development of multiple independent interfaces for accessing DEX protocols, reducing reliance on any single frontend. Finally, it emphasized the need for better user education about checking contract addresses and verifying transaction details before signing.</p>
</section>
</section>
<section id="the-year-of-market-making-evolution" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-market-making-evolution">2018: The Year of Market Making Evolution</h2>
<section id="protocol-innovations-2" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-2">Protocol Innovations</h3>
<p>2018 marked a transformative period in DEX development as the industry moved beyond simple order book models to explore more sophisticated market-making mechanisms.</p>
<section id="uniswap-v1" class="level4">
<h4 class="anchored" data-anchor-id="uniswap-v1">Uniswap v1</h4>
<p>Hayden Adams introduced Uniswap v1 near the end of 2018, fundamentally changing how decentralized trading could work. The protocol’s constant product market maker formula (x * y = k) represented a breakthrough in automated market making. Unlike previous DEXs that tried to replicate traditional order book systems on-chain, Uniswap took a radically different approach.</p>
<p>The constant product formula created a continuous pricing curve where trades of any size could always execute, with prices automatically adjusting based on the relative quantities of tokens in the pool. This elegant mathematical solution addressed several critical challenges that had plagued earlier DEXs:</p>
<p>First, it dramatically reduced gas costs by eliminating the need to store and update order books on-chain. Every trade required only a simple calculation based on current pool balances. Second, it democratized market making by allowing any user to become a liquidity provider by depositing pairs of tokens. Third, it provided guaranteed liquidity at every price point, eliminating the problem of sparse order books that had made trading on earlier DEXs unreliable.</p>
<p>Notably, Uniswap v1 launched without a protocol token, relying solely on trading fees (0.3%) to incentivize liquidity provision. While this demonstrated that DEXs could operate sustainably without tokens, this design choice would later prove problematic during DeFi Summer in 2020. Without a token-based incentive system, Uniswap found itself vulnerable to competitive liquidity extraction by protocols that could offer additional token rewards. This limitation would eventually lead to the creation of the UNI token, but not before significant liquidity had migrated to competing protocols.</p>
<video width="100%" height="auto" controls="">
<source src="../../animations/media/videos/univ1/480p15/ConstantProductExplainer.mp4" type="video/mp4">
<p>Your browser does not support the video tag. </p>
</video></section>
<section id="kyber-network" class="level4">
<h4 class="anchored" data-anchor-id="kyber-network">Kyber Network</h4>
<p>Early 2018 saw the mainnet launch of Kyber Network, which introduced a novel reserve system for on-chain liquidity. Instead of using a single market-making mechanism, Kyber allowed different entities to create specialized reserve smart contracts, each implementing its own pricing strategy. This flexibility enabled professional market makers to use sophisticated pricing models while still allowing automated market making through simpler strategies.</p>
<p>The Kyber Network Crystal (KNC) token played a central role in the protocol’s operations. Market makers needed to maintain KNC deposits to operate reserves, creating natural demand. The protocol also implemented a fee-sharing mechanism where trading fees were used to buy and burn KNC, creating deflationary pressure. This token model demonstrated how protocol tokens could align incentives between traders, market makers, and token holders.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/charts/KNC.png" class="img-fluid figure-img"></p>
<figcaption>KNC Token Performance</figcaption>
</figure>
</div>
</section>
<section id="idex" class="level4">
<h4 class="anchored" data-anchor-id="idex">IDEX</h4>
<p>IDEX gained significant traction in 2018 with its hybrid approach to decentralized trading. While maintaining on-chain settlement for security, IDEX used off-chain order matching to improve throughput and user experience. The IDEX token implemented a staking mechanism where node operators had to stake tokens to participate in transaction processing, with stakers receiving a portion of trading fees. This created a direct link between protocol success and token holder rewards, while also providing security through potential stake slashing for misbehavior.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../../images/charts/IDEX.png" class="img-fluid figure-img"></p>
<figcaption>IDEX Token Performance</figcaption>
</figure>
</div>
</section>
</section>
<section id="trading-intents-evolution" class="level3">
<h3 class="anchored" data-anchor-id="trading-intents-evolution">Trading Intents Evolution</h3>
<p>In 2018, several protocols pushed forward the evolution of trading intents, moving beyond the basic limit orders that characterized early DEXs.</p>
<p>0x Protocol led many of these innovations through their v2 release. They introduced meta-transactions, which they called “forwarding contracts.” These contracts allowed users to delegate their transaction execution to third parties who would cover gas costs. This was particularly significant because gas costs were a major barrier to DEX adoption at the time. When a user wanted to make a trade but didn’t have ETH for gas, relayers could execute the trade on their behalf and either build the gas cost into the trade or charge a separate fee.</p>
<p>Radar Relay, building on the 0x Protocol, pioneered more sophisticated order types. They introduced the concept of partial fill orders with minimum execution quantities. This meant traders could specify that they wanted to buy 1000 tokens but would accept as few as 100 tokens in a single fill. This flexibility was important for large orders that might need to be filled across multiple trades.</p>
<p>Kyber Network contributed to intent evolution through their reserve system. Their architecture allowed for conditional execution based on external price feeds. Market makers running Kyber reserves could implement sophisticated pricing strategies that took into account data from various oracles, enabling more dynamic and market-responsive trading.</p>
<p>The concept of Time-Weighted Average Price (TWAP) orders began to emerge through early experiments on IDEX. While not fully automated TWAP execution as we know it today, IDEX introduced the ability to spread large orders over time through their hybrid order book system. This helped traders minimize their price impact by breaking up large trades into smaller pieces.</p>
<p>Multi-hop trades across different liquidity pools were first implemented by Bancor through their Smart Token system. Because every token in their network was connected through BNT, traders could execute trades between any two tokens by routing through BNT. This was an early predecessor to the automated routing systems that would become common in later years.</p>
<p>These innovations in trading intents were significant because they showed how DEXs could move beyond simply replicating centralized exchange functionality and start offering new types of trading experiences that were uniquely enabled by blockchain technology. The ability to express more sophisticated trading intents also laid important groundwork for the intent-based systems that would emerge in later years.</p>
</section>
<section id="academic-foundations" class="level3">
<h3 class="anchored" data-anchor-id="academic-foundations">Academic Foundations</h3>
<p>2018 marked the beginning of serious academic research into DEX design. Researchers began analyzing the mathematical properties of different market-making approaches, producing formal proofs about their behavior and limitations. This research proved crucial for future innovations, particularly in understanding how different pricing curves could be optimized for specific use cases.</p>
</section>
<section id="early-mev-awareness" class="level3">
<h3 class="anchored" data-anchor-id="early-mev-awareness">Early MEV Awareness</h3>
<p>While the term “MEV” (Miner Extractable Value) hadn’t yet been coined, 2018 saw the first systematic exploitation of transaction ordering on decentralized exchanges. These early patterns emerged as traders began to understand how the deterministic nature of AMMs could be used for profit.</p>
<p>The first widely recognized form of exploitation came through what we now call sandwich attacks. Traders discovered they could maximize profits by placing two transactions: one immediately before and one immediately after a target transaction. Here’s how it worked: when they observed a large trade pending in the mempool, they would:</p>
<ol type="1">
<li>Place a trade in the same direction as the target trade, pushing the price in that direction</li>
<li>Let the target transaction execute at the worse price</li>
<li>Reverse their position after the target trade, profiting from the price movement</li>
</ol>
<p>This pattern was particularly effective on Uniswap v1 because of its constant product formula. The formula’s deterministic nature meant attackers could precisely calculate their potential profit before executing the sandwich attack. Furthermore, the lack of slippage protection in many early trading contracts made users particularly vulnerable.</p>
<p>Beyond sandwich attacks, traders also began to understand how they could extract value through back-running - placing their transactions immediately after others to profit from the information contained in those transactions. For instance, if someone made a profitable arbitrage trade, others could copy that trade in the same block by paying higher gas fees.</p>
<p>Gas price auctions emerged as an important mechanic during this period. Traders began engaging in “gas wars,” repeatedly outbidding each other with higher gas prices to ensure their transactions would be included before others. This revealed how miners (now validators) could extract value simply by ordering transactions in their blocks.</p>
<p>The community’s response to these early exploits was mixed. Some viewed them as a natural part of an efficient market, while others saw them as a form of front-running that needed to be addressed. This debate would later influence the development of various MEV protection mechanisms.</p>
<p>Researchers at Cornell Tech and other institutions began studying these phenomena in 2018, though their work wouldn’t be published until later. They started developing formal models to understand how much value could be extracted through transaction ordering, laying the groundwork for what would later be termed MEV. These early experiences with transaction ordering exploitation had several lasting impacts on DEX design:</p>
<ol type="1">
<li>Development of slippage protection mechanisms became standard</li>
<li>Increased focus on transaction privacy and ordering fairness</li>
<li>Recognition that miners/validators were becoming critical actors in the DEX ecosystem</li>
<li>Understanding that economic incentives needed to account for these new forms of value extraction</li>
</ol>
<p>This emerging awareness of MEV-like behaviors in 2018 was crucial because it helped the DeFi community understand that transaction ordering wasn’t just a technical consideration - it was fundamentally an economic and game theoretic challenge that would need innovative solutions.</p>
</section>
<section id="hacks" class="level3">
<h3 class="anchored" data-anchor-id="hacks">Hacks</h3>
<p>The most significant security breach of 2018 occurred in July when Bancor suffered a $23.5 million hack. Attackers managed to compromise a wallet with smart contract upgrade privileges, demonstrating how administrative functions intended for protocol maintenance could become attack vectors. The incident gained particular attention when Bancor used their admin controls to freeze $10 million worth of stolen BNT tokens.</p>
<p>The Bancor hack sparked intense debate within the cryptocurrency community about the true nature of decentralization. The protocol’s ability to freeze tokens, while preventing further losses, suggested a degree of centralized control that many viewed as contradicting fundamental DeFi principles. This tension between security and decentralization would influence future protocol designs, leading to more sophisticated governance and upgrade mechanisms.</p>
<p>Throughout 2018, several smaller but noteworthy security incidents occurred involving malicious token contracts. Attackers created tokens with manipulated transfer functions that could exploit assumptions in DEX smart contracts. These incidents highlighted the need for robust token integration standards and more thorough security checks when interacting with arbitrary tokens.</p>
<section id="security-lessons-learned" class="level4">
<h4 class="anchored" data-anchor-id="security-lessons-learned">Security Lessons Learned</h4>
<p>The security incidents of 2018 taught several crucial lessons that would shape future DEX development:</p>
<ol type="1">
<li><p>Administrative Functions: Upgrade mechanisms and admin privileges needed to be carefully designed with robust access controls, time locks, and multi-signature requirements.</p></li>
<li><p>Token Integration: DEXs needed to implement comprehensive safety checks when interacting with arbitrary tokens, leading to the development of more sophisticated token standards and security practices.</p></li>
<li><p>Centralization Risks: The balance between maintaining protocol security and achieving true decentralization emerged as a fundamental challenge in DEX design.</p></li>
<li><p>Smart Contract Simplicity: The relative security of simple, focused smart contracts compared to more complex systems encouraged a “security through simplicity” approach in early protocol design.</p></li>
</ol>
<p>The security challenges faced during this period laid important groundwork for the more sophisticated security practices that would emerge as DeFi grew more complex in subsequent years.</p>
<p>Let me write a comprehensive section about 2019, which was a year of refinement and preparation for the DeFi explosion that would follow.</p>
</section>
</section>
</section>
<section id="the-year-of-infrastructure-development" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-infrastructure-development">2019: The Year of Infrastructure Development</h2>
<section id="protocol-innovation" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovation">Protocol Innovation</h3>
<p>2019 saw DEX protocols focusing on improving infrastructure and solving fundamental technical challenges. Uniswap v1’s success had demonstrated the viability of AMMs, leading other protocols to experiment with variations on this model.</p>
<p>dYdX launched their perpetual trading protocol, introducing a significant innovation in DEX design. Unlike spot trading DEXs, dYdX implemented an off-chain order book with on-chain settlement specifically designed for margin trading and perpetual futures. Their protocol used a hybrid approach where orders were matched off-chain but all positions, collateral, and settlements remained fully on-chain.</p>
<p>Loopring introduced zkRollup technology for DEX scaling, becoming one of the first protocols to implement zero-knowledge proofs for trading. This allowed them to move computation off-chain while maintaining security through cryptographic proofs, significantly increasing potential throughput and reducing gas costs.</p>
</section>
<section id="trading-intents-evolution-1" class="level3">
<h3 class="anchored" data-anchor-id="trading-intents-evolution-1">Trading Intents Evolution</h3>
<p>Trading intents became more sophisticated in 2019 as protocols began implementing more complex order types. dYdX introduced stop-loss and take-profit orders for their perpetual trading platform, marking the first time these traditional trading tools were available in a decentralized environment.</p>
<p>Loopring’s v3 protocol introduced request batching, where multiple trading intents could be combined into a single settlement. This not only improved efficiency but also provided better protection against front-running by making it harder to identify individual trades within a batch.</p>
<p>The 0x protocol continued evolving their order format, introducing conditional orders that could execute based on price feeds and other on-chain data. This laid important groundwork for the more sophisticated intent-based systems that would emerge in later years.</p>
</section>
<section id="mev-evolution" class="level3">
<h3 class="anchored" data-anchor-id="mev-evolution">MEV Evolution</h3>
<p>2019 was the year when MEV began to be understood as a systemic issue rather than just isolated incidents. Researchers at Cornell Tech and IC3 started formal analysis of what they termed “front-running as a service,” documenting how miners could extract value by reordering transactions.</p>
<p>Phil Daian and his colleagues published their seminal paper “Flash Boys 2.0,” which formally introduced the concept of Miner Extractable Value. This research demonstrated how blockchain mechanics could be exploited for profit and showed that these opportunities were inherent to how blockchains ordered transactions.</p>
<p>In response, protocols began implementing various MEV protection mechanisms. Loopring’s zkRollup implementation provided some natural MEV protection through transaction batching, while other protocols experimented with commit-reveal schemes to hide trading information.</p>
</section>
<section id="token-evolution" class="level3">
<h3 class="anchored" data-anchor-id="token-evolution">Token Evolution</h3>
<p>2019 saw experiments with more sophisticated token models as protocols tried to create sustainable economics. Loopring’s LRC token introduced a novel staking mechanism where protocol fees were distributed to stakers, creating a direct link between protocol usage and token value.</p>
<p>Synthetix, while not strictly a DEX, introduced innovative token economics that would influence later DEX designs. Their SNX staking model, where stakers earned trading fees but had to maintain collateral ratios, demonstrated how token mechanics could create aligned incentives for protocol stability.</p>
</section>
<section id="notable-hacks-and-security-incidents-1" class="level3">
<h3 class="anchored" data-anchor-id="notable-hacks-and-security-incidents-1">Notable Hacks and Security Incidents</h3>
<p>While 2019 saw fewer dramatic hacks than previous years, several significant security incidents occurred. The most notable was the bZx flash loan incident, where attackers exploited price oracle vulnerabilities to manipulate trading prices. While the monetary loss was relatively small, this incident previewed the flash loan attacks that would become more common in subsequent years.</p>
<p>Synthetix experienced a critical vulnerability in June 2019 when a trading bot exploited a price feed error to generate over $1 billion in paper profits. While Synthetix worked with the bot operator to reverse the trades, this incident highlighted the importance of robust price oracle systems in DEX design.</p>
<p>The relative scarcity of major hacks in 2019 likely resulted from increased focus on security and audit practices. Protocols began implementing more thorough testing procedures and longer audit periods before deployment. Additionally, bug bounty programs became more common, with protocols actively incentivizing security researchers to find vulnerabilities before they could be exploited.</p>
</section>
</section>
<section id="the-year-of-specialized-solutions" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-specialized-solutions">2020: The Year of Specialized Solutions</h2>
<section id="protocol-innovations-3" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-3">Protocol Innovations</h3>
<p>This year saw multiple significant protocol launches:</p>
<ol type="1">
<li>Uniswap v2:
<ul>
<li>Added price oracles</li>
<li>Introduced flash swap functionality</li>
<li>Improved gas efficiency</li>
<li>Better token decimal handling</li>
<li>Implemented protocol fee mechanisms</li>
</ul></li>
<li>Curve Finance:
<ul>
<li>Introduced the StableSwap formula</li>
<li>Optimized for similar-valued tokens</li>
<li>Achieved extremely efficient stablecoin trading</li>
<li>Pioneered vote-escrow tokenomics</li>
</ul></li>
<li>Balancer:
<ul>
<li>Enabled multiple tokens in single pools</li>
<li>Introduced customizable token weights</li>
<li>Implemented dynamic fee adjustment</li>
<li>Created portfolio rebalancing functionality</li>
</ul></li>
</ol>
</section>
<section id="dex-tokens-2" class="level3">
<h3 class="anchored" data-anchor-id="dex-tokens-2">DEX Tokens</h3>
<p>Vote-escrow tokenomics emerged through Curve’s veCRV model, which would become a standard across DeFi. This introduced: - Time-weighted governance rights - Enhanced fee sharing mechanisms - Liquidity mining incentives - Protocol-owned liquidity concepts</p>
</section>
<section id="trading-intents-1" class="level3">
<h3 class="anchored" data-anchor-id="trading-intents-1">Trading Intents</h3>
<p>Proto-intents emerged during this period: - Abstract trade specifications - Multi-hop execution capabilities - Price-aware routing - Early MEV protection mechanisms</p>
</section>
<section id="mev-evolution-1" class="level3">
<h3 class="anchored" data-anchor-id="mev-evolution-1">MEV Evolution</h3>
<p>The concept of MEV became more widely recognized, leading to: - Increased awareness of frontrunning risks - Development of basic MEV protection mechanisms - Emergence of MEV extraction tools - Growing focus on fair ordering solutions</p>
</section>
</section>
<section id="the-capital-efficiency-revolution" class="level2">
<h2 class="anchored" data-anchor-id="the-capital-efficiency-revolution">2021: The Capital Efficiency Revolution</h2>
<section id="protocol-innovations-4" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-4">Protocol Innovations</h3>
<p>Uniswap v3 transformed the space with concentrated liquidity: - Custom price ranges for liquidity provision - Significantly higher capital efficiency - Multiple fee tiers - Advanced oracle functionality - Non-fungible liquidity positions</p>
</section>
<section id="mev-evolution-2" class="level3">
<h3 class="anchored" data-anchor-id="mev-evolution-2">MEV Evolution</h3>
<p>MEV awareness and solutions matured: - Development of flashbots - Emergence of MEV-aware designs - Implementation of protected transaction pools - Growing sophistication of MEV extraction</p>
</section>
</section>
<section id="the-year-of-accessibility-and-cross-chain-innovation" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-accessibility-and-cross-chain-innovation">2022: The Year of Accessibility and Cross-Chain Innovation</h2>
<section id="protocol-innovations-5" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-5">Protocol Innovations</h3>
<p>Trader Joe’s Liquidity Book simplified concentrated liquidity: - Discrete bins for liquidity provision - More predictable fee generation - Simplified position management - Enhanced gas efficiency - Unified liquidity ranges</p>
</section>
<section id="trading-intents-2" class="level3">
<h3 class="anchored" data-anchor-id="trading-intents-2">Trading Intents</h3>
<p>Modern intents emerged: - High-level trade objectives - Solver-based execution - Cross-chain awareness - Unified liquidity access</p>
</section>
<section id="mev-evolution-3" class="level3">
<h3 class="anchored" data-anchor-id="mev-evolution-3">MEV Evolution</h3>
<p>Cross-chain MEV emerged: - Multi-chain extraction opportunities - Cross-chain arbitrage development - Specialized MEV infrastructure - Enhanced protection mechanisms</p>
</section>
</section>
<section id="the-year-of-optimization" class="level2">
<h2 class="anchored" data-anchor-id="the-year-of-optimization">2023: The Year of Optimization</h2>
<section id="protocol-innovations-6" class="level3">
<h3 class="anchored" data-anchor-id="protocol-innovations-6">Protocol Innovations</h3>
<p>Carbon introduced logarithmic market making: - Logarithmic pricing curves - Asset-specific optimization - Better volatility handling - More efficient capital usage - Dynamic curve adjustment</p>
</section>
<section id="cross-chain-integration" class="level3">
<h3 class="anchored" data-anchor-id="cross-chain-integration">Cross-Chain Integration</h3>
<p>The space evolved beyond single-chain solutions: - Cross-chain liquidity bridges - Unified liquidity pools - Chain-specific adaptations - Hybrid liquidity models</p>
</section>
<section id="mev-evolution-4" class="level3">
<h3 class="anchored" data-anchor-id="mev-evolution-4">MEV Evolution</h3>
<p>MEV solutions became more sophisticated: - Intent-centric MEV protection - Cross-chain MEV mitigation - Advanced orderflow auctions - Democratic MEV distribution</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The evolution of DEXs from 2016 to 2023 shows a remarkable progression from simple on-chain order books to sophisticated, multi-chain market-making systems. Each year brought significant innovations across protocol design, trading intents, tokenomics, and MEV handling. This evolution hasn’t been linear - different approaches emerged to solve different problems, and older models haven’t been entirely replaced. Instead, we’ve seen a diversification of solutions, each optimized for specific use cases and requirements.</p>
<p>The future of DEX design will likely continue to see specialized solutions emerge alongside improvements to existing models, with a growing emphasis on cross-chain interoperability and ecosystem-specific optimization. As the space matures, we can expect to see continued innovation in capital efficiency, user experience, and sustainable tokenomics models.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/financial/market_structure.html" class="pagination-link" aria-label="Market Structures">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Market Structures</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/financial/ratings.html" class="pagination-link" aria-label="Digital Asset Rating Framework">
        <span class="nav-page-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Digital Asset Rating Framework</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>